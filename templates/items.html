<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Items Required</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/items.css') }}">
    <script>
        // Function to calculate total price for each row
        function calculateTotalPrice(row) {
            const quantity = parseFloat(row.querySelector(".quantity").value) || 0;
            const pricePerUnit = parseFloat(row.querySelector(".price-per-unit").value) || 0;
            const totalPrice = row.querySelector(".total-price");
            totalPrice.value = (quantity * pricePerUnit).toFixed(2);
        }

        // Function to add a new row to the table
        function addRow() {
            const tableBody = document.getElementById("item-rows");
            const newRow = document.createElement("tr");

            newRow.innerHTML = `
                <td><input type="number" name="sno" required min="1" class="sno"></td>
                <td><input type="text" name="item_name" required></td>
                <td><input type="number" name="quantity" required min="1" class="quantity" oninput="calculateTotalPrice(this.parentElement.parentElement)"></td>
                <td><input type="number" step="0.01" name="price_per_unit" required min="0" class="price-per-unit" oninput="calculateTotalPrice(this.parentElement.parentElement)"></td>
                <td><input type="number" step="0.01" name="total_price" required min="0" class="total-price" readonly></td>
            `;

            tableBody.appendChild(newRow);
        }
    </script>
</head>
<body>
    <div class="container">
        <h1>Items Required for Event</h1>
        <form action="{{ url_for('items_page') }}" method="POST">
            <table>
                <thead>
                    <tr>
                        <th>S.NO.</th>
                        <th>Item Name</th>
                        <th>Quantity</th>
                        <th>Price per Unit</th>
                        <th>Total Price</th>
                    </tr>
                </thead>
                <tbody id="item-rows">
                    <tr>
                        <td><input type="number" name="sno" required min="1" class="sno"></td>
                        <td><input type="text" name="item_name" required></td>
                        <td><input type="number" name="quantity" required min="1" class="quantity" oninput="calculateTotalPrice(this.parentElement.parentElement)"></td>
                        <td><input type="number" step="0.01" name="price_per_unit" required min="0" class="price-per-unit" oninput="calculateTotalPrice(this.parentElement.parentElement)"></td>
                        <td><input type="number" step="0.01" name="total_price" required min="0" class="total-price" readonly></td>
                    </tr>
                </tbody>
            </table>
            <button type="button" onclick="addRow()">Add Row</button>
            <button type="submit">Confirm</button>
        </form>
        <br>
        <a href="{{ url_for('event_page') }}">Back to Event Form</a>
        <br><br>
        <a href="{{ url_for('home') }}">Home</a>
    </div>
</body>
</html>
